# Image URL Converter

è¿™æ˜¯ä¸€ä¸ªç®€å•çš„å·¥å…·ï¼Œå¯ä»¥å°†ä»»æ„å›¾ç‰‡URLè½¬æ¢ä¸ºæ‰˜ç®¡åœ¨ Cloudflare R2 ä¸Šçš„æ°¸ä¹…é“¾æ¥ã€‚é€‚åˆéœ€è¦å›¾ç‰‡æ‰˜ç®¡æœåŠ¡çš„ä¸ªäººæˆ–å°å‹é¡¹ç›®ä½¿ç”¨ã€‚

## ğŸ‰ è°åœ¨ä½¿ç”¨

- [Next Idea NewTab](https://nextidea.nextidea.dev)

## ğŸ“¦ é¡¹ç›®ç»“æ„

```
/image-url-converter
  â”œâ”€â”€ /image-converter-next     # Next.js å‰ç«¯é¡¹ç›®
  â””â”€â”€ /image-converter-worker   # Cloudflare Worker é¡¹ç›®
```

## ğŸ“Œ åŠŸèƒ½ç‰¹ç‚¹

- ç®€å•æ˜“ç”¨ï¼šåªéœ€è¾“å…¥åŸå§‹å›¾ç‰‡URLï¼Œå³å¯è·å¾—æ°¸ä¹…é“¾æ¥
- å…¨çƒåŠ é€Ÿï¼šä½¿ç”¨ Cloudflare CDNï¼Œè®¿é—®é€Ÿåº¦å¿«
- å…è´¹ä½¿ç”¨ï¼šåˆ©ç”¨ Cloudflare R2 çš„å…è´¹é¢åº¦
  - æ¯æœˆ 10GB å­˜å‚¨ç©ºé—´
  - æ¯æœˆ 10GB å‡ºç«™æµé‡
- æ”¯æŒè‡ªå®šä¹‰åŸŸå
- å®Œå…¨å…è´¹éƒ¨ç½²

## ğŸ“š ä½¿ç”¨æŒ‡å—

### 1. å‡†å¤‡å·¥ä½œ


1. æ³¨å†Œ [Cloudflare](https://dash.cloudflare.com/sign-up) è´¦å·
2. å®‰è£… [Node.js](https://nodejs.org/) (ç‰ˆæœ¬ 18.0.0 æˆ–æ›´é«˜)
3. å®‰è£… [pnpm](https://pnpm.io/) 

### 2. é…ç½® Cloudflare R2

1. ç™»å½• [Cloudflare æ§åˆ¶å°](https://dash.cloudflare.com)
2. åœ¨å·¦ä¾§èœå•æ‰¾åˆ°å¹¶ç‚¹å‡» "R2"
3. å¦‚æœæ˜¯é¦–æ¬¡ä½¿ç”¨ï¼Œä¼šæç¤ºåˆ›å»ºç»“ç®—è´¦å·ï¼ŒæŒ‰æç¤ºå®Œæˆå³å¯ï¼ˆä¸ä¼šæ”¶è´¹ï¼‰
4. ç‚¹å‡» "Create bucket" åˆ›å»ºå­˜å‚¨æ¡¶
   - Bucket name å¡«å†™ï¼š`images`ï¼ˆæˆ–ä½ å–œæ¬¢çš„åå­—ï¼‰
   - ç‚¹å‡» "Create bucket" å®Œæˆåˆ›å»º
5. åœ¨å­˜å‚¨æ¡¶åˆ—è¡¨ä¸­ç‚¹å‡»åˆšåˆ›å»ºçš„å­˜å‚¨æ¡¶
6. ç‚¹å‡» "Settings" æ ‡ç­¾
7. æ‰¾åˆ° "Public access" éƒ¨åˆ†
   - å¼€å¯ "Public bucket" å¼€å…³
   - å¦‚æœæœ‰è‡ªå·±çš„åŸŸåï¼Œå¯ä»¥åœ¨ä¸‹æ–¹è®¾ç½®è‡ªå®šä¹‰åŸŸåï¼ˆæ¯”å¦‚ï¼šimages.your-domain.comï¼‰
   - å¦‚æœæ²¡æœ‰è‡ªå·±çš„åŸŸåï¼Œå¤åˆ¶ "Public bucket URL" å¤‡ç”¨
8. åˆ›å»º API ä»¤ç‰Œ
   - ç‚¹å‡»å³ä¸Šè§’çš„ "Manage R2 API Tokens"
   - ç‚¹å‡» "Create API token"
   - æƒé™é€‰æ‹©ï¼šObject Read & Write
   - ç‚¹å‡» "Create token"
   - ä¿å­˜æ˜¾ç¤ºçš„ä¿¡æ¯ï¼š
     * Access Key ID
     * Secret Access Key

æ³¨æ„ï¼šSecret Access Key åªæ˜¾ç¤ºä¸€æ¬¡ï¼Œè¯·åŠ¡å¿…ä¿å­˜ï¼

## 3. æœ¬åœ°ä½¿ç”¨æ­¥éª¤

1. [Fork](https://github.com/weijunext/image-url-converter/fork) è¿™ä¸ªé¡¹ç›®åˆ°ä½ çš„ GitHub è´¦å·ï¼Œç„¶åå…‹éš†åˆ°æœ¬åœ°


```bash
git clone [repository-url]
cd image-url-converter
```

### 2. é…ç½®å¹¶è¿è¡Œ Worker

```bash
# è¿›å…¥ Worker é¡¹ç›®ç›®å½•
cd image-converter-worker

# å®‰è£…ä¾èµ–
npm install

# å®‰è£… wrangler
npm install -g wrangler

# ç™»å½•åˆ° Cloudflare
wrangler login

# éƒ¨ç½² Worker
wrangler deploy
```

### 3. é…ç½®å¹¶è¿è¡Œ Next.js åº”ç”¨

```bash
# å›åˆ°é¡¹ç›®æ ¹ç›®å½•
cd ..

# è¿›å…¥ Next.js é¡¹ç›®ç›®å½•
cd image-converter-next

# å®‰è£…ä¾èµ–
npm install

# åˆ›å»ºç¯å¢ƒå˜é‡æ–‡ä»¶
cp .env.example .env.local
```

ç¼–è¾‘ `.env.local` æ–‡ä»¶ï¼Œå¡«å…¥ä»¥ä¸‹ä¿¡æ¯ï¼š
```
R2_ACCOUNT_ID=ä½ çš„Cloudflareè´¦å·IDï¼ˆåœ¨Cloudflareä¸»é¡µå³ä¾§å¯ä»¥æ‰¾åˆ°ï¼‰
R2_ACCESS_KEY_ID=ä½ çš„R2 Access Key ID
R2_SECRET_ACCESS_KEY=ä½ çš„R2 Secret Access Key
R2_BUCKET_NAME=ä½ çš„å­˜å‚¨æ¡¶åç§°ï¼ˆä¾‹å¦‚ï¼šimagesï¼‰
R2_PUBLIC_URL=ä½ çš„Public bucket URL
```

### 4. è¿è¡Œå¼€å‘æœåŠ¡å™¨ï¼š
```bash
npm run dev
```

ç°åœ¨å¯ä»¥è®¿é—® http://localhost:3000 ä½¿ç”¨å·¥å…·äº†ã€‚

## âš™ï¸ ä½¿ç”¨æ–¹æ³•

1. ç¡®ä¿ Next.js å¼€å‘æœåŠ¡å™¨æ­£åœ¨è¿è¡Œ
2. æ‰“å¼€æµè§ˆå™¨è®¿é—® http://localhost:3000
3. åœ¨è¾“å…¥æ¡†ä¸­ç²˜è´´å›¾ç‰‡ URL
4. ç‚¹å‡»"è½¬æ¢"æŒ‰é’®
5. ç­‰å¾…å¤„ç†å®Œæˆï¼Œè·å–æ–°çš„æ°¸ä¹…é“¾æ¥

## â“ å¸¸è§é—®é¢˜

Qï¼šå…è´¹é¢åº¦å¤Ÿç”¨å—ï¼Ÿ
Aï¼šå¯¹äºä¸ªäººä½¿ç”¨æ¥è¯´ç»°ç»°æœ‰ä½™ã€‚æ¯æœˆ 10GB å­˜å‚¨å’Œ 10GB æµé‡ï¼Œå¯ä»¥å­˜å‚¨æ•°åƒå¼ å›¾ç‰‡ã€‚

Qï¼šä¸Šä¼ çš„å›¾ç‰‡ä¼šè¿‡æœŸå—ï¼Ÿ
Aï¼šä¸ä¼šã€‚åªè¦ä½ çš„ Cloudflare è´¦å·æ­£å¸¸ä½¿ç”¨ï¼Œå›¾ç‰‡å°±ä¼šä¸€ç›´ä¿å­˜ã€‚

Qï¼šä¸Šä¼ é€Ÿåº¦æ…¢æ€ä¹ˆåŠï¼Ÿ
Aï¼šå›¾ç‰‡ä¸Šä¼ é€Ÿåº¦ä¸»è¦å–å†³äºåŸå§‹å›¾ç‰‡æ‰€åœ¨æœåŠ¡å™¨çš„å“åº”é€Ÿåº¦ã€‚å»ºè®®é€‰æ‹©ç¨³å®šçš„å›¾ç‰‡æºã€‚

Qï¼šæ”¯æŒå“ªäº›å›¾ç‰‡æ ¼å¼ï¼Ÿ
Aï¼šæ”¯æŒæ‰€æœ‰å¸¸è§çš„å›¾ç‰‡æ ¼å¼ï¼ŒåŒ…æ‹¬ JPGã€PNGã€GIFã€WebP ç­‰ã€‚

## ğŸ”” æ³¨æ„äº‹é¡¹

1. è¯·ç¡®ä¿ä½ è¦è½¬æ¢çš„å›¾ç‰‡URLæ˜¯å¯ä»¥å…¬å¼€è®¿é—®çš„
2. å»ºè®®å®šæœŸæ£€æŸ¥ R2 çš„ä½¿ç”¨é‡ï¼Œé¿å…è¶…å‡ºå…è´¹é¢åº¦
3. è¯·å‹¿ä¸Šä¼ è¿è§„æˆ–è¿æ³•çš„å›¾ç‰‡å†…å®¹

## â˜ï¸ æŠ€æœ¯æ”¯æŒ

å¦‚æœé‡åˆ°é—®é¢˜ï¼š
1. å¯ä»¥åœ¨ GitHub Issues ä¸­æé—®
2. å¯ä»¥æŸ¥çœ‹ [Cloudflare R2 æ–‡æ¡£](https://developers.cloudflare.com/r2/)
3. å¯ä»¥è®¿é—® [Cloudflare å¸®åŠ©ä¸­å¿ƒ](https://support.cloudflare.com/)

## ğŸ“œ è®¸å¯è¯

MIT License